---
- name: Check && install python
  hosts: all
  become: true
  gather_facts: False

  tasks:
    - name: Install python for Ansible
      raw: test -e /usr/bin/python ||
        (apt -y update && apt install -y python-minimal build-essential)
      changed_when: False
    - name: Install python2 requirements
      raw: test -e /usr/bin/pip ||
        (apt install -y python-pip python-setuptools python-dev)
      changed_when: False
    - name: Install python3 requirements
      raw: test -e /usr/bin/pip3 ||
        (apt install -y python3-pip python3-setuptools python3-dev python3-docker)
      changed_when: False
